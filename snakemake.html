<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snakemake &mdash; Reproducible Computational Science  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Conda" href="conda.html" />
    <link rel="prev" title="doit" href="pydoit.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Reproducible Computational Science
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="reproducibility.html">What makes scientific results reproducible?</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">A complete, executable example</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="pydoit.html">doit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Snakemake</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-it">What is it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-should-i-use-it">Why should I use it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-use">Basic use</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wildcards">Wildcards</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parallelization">Parallelization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parametrization">Parametrization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conda-integration">Conda integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-features">Other features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/modify_files.html">Modifying files in python</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Reproducible Computational Science</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Snakemake</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/snakemake.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="snakemake">
<h1>Snakemake<a class="headerlink" href="#snakemake" title="Permalink to this heading"></a></h1>
<section id="what-is-it">
<h2>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Snakemake</span></code> is a python based workflow management system that allows for whole analysis pipelines to be automatized.
It lets you define workflows as a set of rules that state how to produce one or more output files from one or more input files.
Dependencies between rules will be automatically inferred on execution and independent rules will be evaluated in parallel.
If the output files for a rule are newer than the input files it will not be executed again.
Snakemake can directly use conda or docker for reproducible software environments.</p>
</section>
<section id="why-should-i-use-it">
<h2>Why should I use it?<a class="headerlink" href="#why-should-i-use-it" title="Permalink to this heading"></a></h2>
<p>Snakemake allows to automatize data analysis.
On the one hand this means that analysis can be quickly repeated if necessary (e.g. when new data is available).
On the other hand automation drastically reduces the potential for human error.
The rule-based structure of Snakemake enforces a modular design, that improves organization of the code and helps with reusability of analysis steps.
Additionally the integration with conda allows for automatic installation of required software as well as the explicit selection and documentation of software versions, which is necessary for reproducibility.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p>Snakemake can be installed via <code class="docutils literal notranslate"><span class="pre">conda</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge snakemake
</pre></div>
</div>
<p>or via <code class="docutils literal notranslate"><span class="pre">pip</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip install snakemake
</pre></div>
</div>
<p>Note that some of the more advances features (like report generation) might not be available when you install via <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
</section>
<section id="basic-use">
<h2>Basic use<a class="headerlink" href="#basic-use" title="Permalink to this heading"></a></h2>
<p>Snakemake has many features and options. This is only a very small introduction. You can find the full documentation <a class="reference external" href="https://snakemake.readthedocs.io">here</a>.</p>
<p>A Snakemake workflow consist of a set of rules that are implicitly linked by their input and output files.
A rule normally has at least one input file, at least one output file and defines how to produce one from the other.
A minimal toy example (that just copies a file) might look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">exampleCp1</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s2">&quot;inFile.txt&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s2">&quot;outFile.txt&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;cp </span><span class="si">{input}</span><span class="s2"> </span><span class="si">{output}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Here the actual process of the rule is defined with the <code class="docutils literal notranslate"><span class="pre">shell</span></code> keyword. This means the following string will directly be interpreted as a command to the shell.<br />The curly brackets in <code class="docutils literal notranslate"><span class="pre">{input}</span></code> and <code class="docutils literal notranslate"><span class="pre">{output}</span></code> mark them as wildcards.
They will be replaced with all the input and all the output files.
In cases with more the one input/output file they can be referenced by position or by a given name like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">mergeExample</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s2">&quot;input1.fastq&quot;</span><span class="p">,</span> <span class="s2">&quot;input2.fastq&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">merged</span><span class="o">=</span><span class="s2">&quot;mergedOut.fasta&quot;</span><span class="p">,</span> <span class="n">notMerged1</span><span class="o">=</span><span class="s2">&quot;unmerged1.fastq&quot;</span><span class="p">,</span> <span class="n">notMerged2</span><span class="o">=</span><span class="s2">&quot;unmerged2.fastq&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;vsearch --fastq_mergepairs </span><span class="si">{input[0]}</span><span class="s2"> --reverse </span><span class="si">{input[1]}</span><span class="s2"> --fastqout_notmerged_fwd </span><span class="si">{ouput.notMerged1}</span><span class="s2">  --fastqout_notmerged_rev </span><span class="si">{output.notMerged2}</span><span class="s2"> </span><span class="si">{output.merged}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Instead of giving a shell command you can also add python code directly or call python or R scripts. To add python code in the Snakemake file you can use the <code class="docutils literal notranslate"><span class="pre">run</span></code> keyword:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rule exampleCp2:
    input: <span class="s2">&quot;inFile.txt&quot;</span>
    output: <span class="s2">&quot;outFile.txt&quot;</span>
    run:
        with open<span class="o">(</span>ouput<span class="o">[</span><span class="m">0</span><span class="o">]</span>, <span class="s2">&quot;w&quot;</span><span class="o">)</span> as out:
            <span class="k">for</span> line <span class="k">in</span> input<span class="o">[</span><span class="m">0</span><span class="o">]</span>:
                 out.write<span class="o">(</span>line<span class="o">)</span>
</pre></div>
</div>
<p>This should only ever be used for very short snippets of code. It is good practice to put your python code into its own script file. For the above example the python script (<code class="docutils literal notranslate"><span class="pre">exampleCp3.py</span></code>) would look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">snakemake</span><span class="o">.</span><span class="n">ouput</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">snakemake</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
         <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<p>And the rule (using the <code class="docutils literal notranslate"><span class="pre">script</span></code> keyword) calling it would be:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rule exampleCp2:
    input: <span class="s2">&quot;inFile.txt&quot;</span>
    output: <span class="s2">&quot;outFile.txt&quot;</span>
    script:
        <span class="s2">&quot;exampleCp3.py&quot;</span>
</pre></div>
</div>
<p>To find out in which order your rules have to be executed Snakemake will compare input and output file names of rules and link them accordingly.
As a starting point it will use the first rule in the file.
Therefore it is common practice to define a <code class="docutils literal notranslate"><span class="pre">all</span></code> rule as the first in the file, that has as inputs the files that should be produced in the end.</p>
<p>For example here is a workflow with three simple rules and an <code class="docutils literal notranslate"><span class="pre">all</span></code> rule:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rule all:
    input: <span class="s2">&quot;fileE.txt&quot;</span>

rule firstRule:
    input: <span class="s2">&quot;fileA.txt&quot;</span>
    output: <span class="s2">&quot;fileB.txt&quot;</span>
    shell:
        <span class="s2">&quot;cp {input} {output}&quot;</span>

rule secondRule:
    input: <span class="s2">&quot;fileB.txt&quot;</span>, <span class="s2">&quot;fileC.txt&quot;</span>
    output: <span class="s2">&quot;fileD.txt&quot;</span>
    shell:
        <span class="s2">&quot;paste {input[0]} {input[1]} &gt; {ouput}&quot;</span>

rule thirdRule:
    input: <span class="s2">&quot;fileD.txt&quot;</span>
    output: <span class="s2">&quot;fileE.txt&quot;</span>
    shell:
        <span class="s2">&quot;cp {input} {output}&quot;</span>
</pre></div>
</div>
<p>This would define a workflow looking like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  fileA.txt ──&gt; fileB.txt ─┐
                           │
                           ├──&gt; fileD.txt ──&gt; fileE.txt
                           │
  fileC.txt ───────────────┘
</pre></div>
</div>
<p>If you write your rules into a file called <code class="docutils literal notranslate"><span class="pre">Snakefile</span></code> you can then execute them by just calling</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>snakemake
</pre></div>
</div>
<p>in the folder where the file is. If you give your file a different name (e.g. <code class="docutils literal notranslate"><span class="pre">main.snakemake.py</span></code>), you have to use the <code class="docutils literal notranslate"><span class="pre">-s</span></code> option to execute your worklflow:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>snakemake -s main.snakemake.py
</pre></div>
</div>
</section>
<section id="wildcards">
<h2>Wildcards<a class="headerlink" href="#wildcards" title="Permalink to this heading"></a></h2>
<p>In many cases you want a rule executed for multiple files (e.g. different samples).
You can use wildcards in input and output file names to achieve this.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">exampleWildcards</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s2">&quot;sample</span><span class="si">{sNr}</span><span class="s2">.txt&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s2">&quot;sample</span><span class="si">{sNr}</span><span class="s2">_filtered.txt&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;grep </span><span class="se">\&quot;</span><span class="s2">YES</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">{input}</span><span class="s2"> &gt; </span><span class="si">{output}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>If you want to run this for sample 1-4 you can write your <code class="docutils literal notranslate"><span class="pre">all</span></code> rule like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="nb">all</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">expand</span><span class="p">(</span><span class="s2">&quot;sample</span><span class="si">{sNr}</span><span class="s2">_filtered.txt&quot;</span><span class="p">,</span> <span class="n">sNr</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
<p>You can also use multiple wildcards in one file name and use wildcards as values in your command, for example to try out different values for parameters for the filtering in the example above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="nb">all</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">expand</span><span class="p">(</span><span class="s2">&quot;sample</span><span class="si">{sNr}</span><span class="s2">_filtered_</span><span class="si">{value}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">sNr</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;YES&quot;</span><span class="p">,</span> <span class="s2">&quot;TRUE&quot;</span><span class="p">,</span> <span class="s2">&quot;OK&quot;</span><span class="p">])</span>

<span class="n">rule</span> <span class="n">exampleWildcards2</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s2">&quot;sample</span><span class="si">{sNr}</span><span class="s2">.txt&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s2">&quot;sample</span><span class="si">{sNr}</span><span class="s2">_filtered_</span><span class="si">{value}</span><span class="s2">.txt&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;grep </span><span class="se">\&quot;</span><span class="si">{wildcards.value}</span><span class="se">\&quot;</span><span class="s2"> </span><span class="si">{input}</span><span class="s2"> &gt; </span><span class="si">{output}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">expand</span></code> command will create all combinations of the entries of both lists.</p>
</section>
<section id="parallelization">
<h2>Parallelization<a class="headerlink" href="#parallelization" title="Permalink to this heading"></a></h2>
<p>Snakemake will by default only use one thread, but you can use the <code class="docutils literal notranslate"><span class="pre">-j</span></code> option to give it access to multiple cores. In this case independent rules will be executed in parallel automatically. In addition you can use multiple threads in one rule if the software you are using supports it using the <code class="docutils literal notranslate"><span class="pre">threads</span></code> keyword. Here is a hypothetical example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">exampleParallel</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s2">&quot;inFile.txt&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s2">&quot;outFile.txt&quot;</span>
    <span class="n">threads</span><span class="p">:</span> <span class="mi">8</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;parallelProgram -o </span><span class="si">{output}</span><span class="s2"> -t </span><span class="si">{threads}</span><span class="s2"> </span><span class="si">{input}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>If you run this example with <code class="docutils literal notranslate"><span class="pre">-j</span> <span class="pre">8</span></code>, eight cores will be used to run <code class="docutils literal notranslate"><span class="pre">parallelProgram</span></code>. If you use <code class="docutils literal notranslate"><span class="pre">-j</span> <span class="pre">4</span></code>, the rule will automatically only use four threads. If you use <code class="docutils literal notranslate"><span class="pre">-j</span> <span class="pre">16</span></code>, two instances of the rule will be evaluated in parallel, if they are independent.</p>
</section>
<section id="parametrization">
<h2>Parametrization<a class="headerlink" href="#parametrization" title="Permalink to this heading"></a></h2>
<p>You can obviously hard code command line parameters into the command you give to the <code class="docutils literal notranslate"><span class="pre">shell</span></code> command, but it is better to use the <code class="docutils literal notranslate"><span class="pre">params</span></code> keyword to have them all in one place:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">clusterExample</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s2">&quot;data.tsv&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s2">&quot;clusters.txt&quot;</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">k</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s2">&quot;euclidean&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;kMeansCluster -k </span><span class="si">{params.k}</span><span class="s2"> -d </span><span class="si">{params.dist}</span><span class="s2"> -o </span><span class="si">{output}</span><span class="s2"> </span><span class="si">{input}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>You can also store all parameters in a separate configuration file (yaml or json). For the example above you could have a config file <code class="docutils literal notranslate"><span class="pre">config.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;k&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w"> </span><span class="nt">&quot;dist&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;euclidean&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The snakefile could than look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">configfile</span><span class="p">:</span> <span class="s2">&quot;config.json&quot;</span>

<span class="n">rule</span> <span class="n">clusterExample2</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="s2">&quot;data.tsv&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s2">&quot;clusters.txt&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;kMeansCluster -k </span><span class="si">{config[k]}</span><span class="s2"> -d </span><span class="si">{config[dist]}</span><span class="s2"> -o </span><span class="si">{output}</span><span class="s2"> </span><span class="si">{input}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</section>
<section id="conda-integration">
<h2>Conda integration<a class="headerlink" href="#conda-integration" title="Permalink to this heading"></a></h2>
<p>Snakemake offers direct integration with <a class="reference external" href="https://docs.conda.io">conda</a>, which allows to fix software versions as well as  automation of installation.
For this you have to create a conda environment file that defines the software, the version you want and the conda <code class="docutils literal notranslate"><span class="pre">channel</span></code> it can be found in (if not the default).
For example for <a class="reference external" href="https://blast.ncbi.nlm.nih.gov/Blast.cgi">Blast</a> this environment file (<code class="docutils literal notranslate"><span class="pre">blast.yaml</span></code>) would look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channels</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioconda</span><span class="w"></span>
<span class="nt">dependencies</span><span class="p">:</span><span class="w"></span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blast=2.9.0</span><span class="w"></span>
</pre></div>
</div>
<p>To use this environment in your Snakemake workflow, use the <code class="docutils literal notranslate"><span class="pre">conda</span></code> keyword:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="n">clusterExample</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">query</span><span class="o">=</span><span class="s2">&quot;sequences.fasta&quot;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s2">&quot;nt&quot;</span>
    <span class="n">output</span><span class="p">:</span> <span class="s2">&quot;balast_hits.txt&quot;</span>
    <span class="n">conda</span><span class="p">:</span>
        <span class="s2">&quot;blast.yaml&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;blastn -query </span><span class="si">{input.query}</span><span class="s2"> -db </span><span class="si">{input.sb}</span><span class="s2"> -out </span><span class="si">{output}</span>
</pre></div>
</div>
<p>To run this using conda you have to use the <code class="docutils literal notranslate"><span class="pre">--use-conda</span></code> option when you execute snakemake:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>snakemake --use-conda
</pre></div>
</div>
<p>Snakemake will then use conda (which has to be installed) to automatically install Blast and run it.</p>
</section>
<section id="other-features">
<h2>Other features<a class="headerlink" href="#other-features" title="Permalink to this heading"></a></h2>
<p>Snakemake is a powerful tool, that offers many additional features. You can find more details in the <a class="reference external" href="https://snakemake.readthedocs.io">documentation</a>. Interesting features include:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://snakemake.readthedocs.io/en/stable/executing/cluster.html">Cluster</a> and <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/executing/cloud.html">cloud</a> execution</p></li>
<li><p>Automated <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/snakefiles/reporting.html">report generation</a></p></li>
<li><p><a class="reference external" href="https://snakemake.readthedocs.io/en/stable/snakefiles/modularization.html">Modularization</a> with wrappers and sub-workflows</p></li>
<li><p>Automated config file <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/snakefiles/configuration.html#validation">validation</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pydoit.html" class="btn btn-neutral float-left" title="doit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="conda.html" class="btn btn-neutral float-right" title="Conda" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Thomas Titscher, Christoph Pohl.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>